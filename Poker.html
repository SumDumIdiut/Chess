<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Professional Poker Table</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(ellipse at center, #1a4c3a 0%, #0d2818 70%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
      overflow-x: hidden;
      min-height: 100vh;
    }

    .casino-header {
      text-align: center;
      padding: 15px 0;
      background: linear-gradient(135deg, #2c1810 0%, #1a0e08 100%);
      border-bottom: 3px solid #d4af37;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }

    .casino-header h1 {
      margin: 0;
      font-size: 2.2rem;
      background: linear-gradient(45deg, #ffd700, #ffed4a, #ffd700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
      letter-spacing: 2px;
    }

    .game-controls {
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 1000;
      background: rgba(0,0,0,0.8);
      padding: 15px;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(212, 175, 55, 0.3);
    }

    .variant-selector {
      margin-bottom: 10px;
    }

    .variant-selector label {
      display: block;
      font-size: 12px;
      color: #d4af37;
      margin-bottom: 5px;
    }

    select {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #d4af37;
      background: #2c2c2c;
      color: white;
      font-size: 12px;
    }

    .control-button {
      width: 100%;
      margin: 5px 0;
      padding: 8px 15px;
      background: linear-gradient(45deg, #d4af37, #f4e87c);
      color: #2c1810;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 12px;
    }

    .control-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(212, 175, 55, 0.4);
    }

    .poker-table-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: calc(100vh - 150px);
      padding: 20px;
      position: relative;
    }

    .poker-table {
      width: 900px;
      height: 500px;
      background: radial-gradient(ellipse at center, #1e5a3e 0%, #0f2d1f 100%);
      border: 12px solid #8b4513;
      border-radius: 50%;
      position: relative;
      box-shadow: 
        0 0 50px rgba(0,0,0,0.8),
        inset 0 0 30px rgba(0,0,0,0.3);
    }

    .table-felt {
      position: absolute;
      inset: 8px;
      background: 
        radial-gradient(ellipse at center, #2d7a52 0%, #1a4d33 100%),
        repeating-linear-gradient(
          45deg,
          transparent,
          transparent 1px,
          rgba(255,255,255,0.02) 1px,
          rgba(255,255,255,0.02) 2px
        );
      border-radius: 50%;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.4);
    }

    .community-area {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      gap: 8px;
      align-items: center;
      background: rgba(0,0,0,0.4);
      padding: 15px 20px;
      border-radius: 12px;
      backdrop-filter: blur(5px);
      border: 2px solid rgba(212, 175, 55, 0.3);
    }

    .pot-display {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(212, 175, 55, 0.9);
      color: #2c1810;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .dealer-button {
      position: absolute;
      width: 30px;
      height: 30px;
      background: linear-gradient(45deg, #ffffff, #e0e0e0);
      border: 2px solid #333;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      color: #333;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .player-position {
      position: absolute;
      width: 140px;
      text-align: center;
    }

    /* Player positions around the table */
    .player-position:nth-child(3) { /* Position 0 - Bottom */
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
    }

    .player-position:nth-child(4) { /* Position 1 - Bottom Right */
      bottom: 20px;
      right: 50px;
    }

    .player-position:nth-child(5) { /* Position 2 - Right */
      right: -70px;
      top: 50%;
      transform: translateY(-50%);
    }

    .player-position:nth-child(6) { /* Position 3 - Top Right */
      top: 20px;
      right: 50px;
    }

    .player-position:nth-child(7) { /* Position 4 - Top */
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
    }

    .player-position:nth-child(8) { /* Position 5 - Top Left */
      top: 20px;
      left: 50px;
    }

    .player-position:nth-child(9) { /* Position 6 - Left */
      left: -70px;
      top: 50%;
      transform: translateY(-50%);
    }

    .player-position:nth-child(10) { /* Position 7 - Bottom Left */
      bottom: 20px;
      left: 50px;
    }

    .player-seat {
      background: rgba(139, 69, 19, 0.8);
      border: 2px solid #8b4513;
      border-radius: 12px;
      padding: 12px 8px;
      backdrop-filter: blur(5px);
      transition: all 0.3s;
      min-height: 120px;
    }

    .player-seat.active {
      border-color: #d4af37;
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
      background: rgba(212, 175, 55, 0.2);
    }

    .player-seat.winner {
      border-color: #00ff00;
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
    }

    .player-name {
      font-size: 12px;
      font-weight: bold;
      color: #d4af37;
      margin-bottom: 8px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    }

    .player-cards {
      display: flex;
      gap: 3px;
      justify-content: center;
      margin-bottom: 8px;
      min-height: 50px;
      align-items: center;
    }

    .card {
      width: 32px;
      height: 48px;
      background: white;
      border-radius: 4px;
      border: 1px solid #333;
      font-size: 8px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      color: black;
      position: relative;
      transition: all 0.3s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      padding: 2px;
    }

    .card:hover {
      transform: scale(1.1);
      z-index: 10;
    }

    .card.red {
      color: #dc2626;
    }

    .card .rank-suit {
      font-weight: bold;
      line-height: 1;
    }

    .card .bottom {
      transform: rotate(180deg);
      align-self: flex-end;
    }

    .card.face-down {
      background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #1e3a8a 100%);
      background-image: 
        repeating-linear-gradient(45deg, transparent, transparent 3px, rgba(255,255,255,.1) 3px, rgba(255,255,255,.1) 6px);
    }

    /* Community cards styling */
    .community-area .card {
      width: 50px;
      height: 75px;
      font-size: 12px;
      padding: 4px;
    }

    .player-chips {
      font-size: 10px;
      color: #ffd700;
      margin-bottom: 4px;
    }

    .player-bet {
      font-size: 10px;
      color: #ff6b6b;
      background: rgba(0,0,0,0.5);
      padding: 2px 6px;
      border-radius: 4px;
    }

    .hand-strength {
      font-size: 9px;
      color: #90EE90;
      margin-top: 4px;
      font-weight: bold;
    }

    .action-panel {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.9);
      padding: 15px 20px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(212, 175, 55, 0.3);
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .action-button {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }

    .action-button.fold {
      background: linear-gradient(45deg, #dc2626, #ef4444);
      color: white;
    }

    .action-button.call {
      background: linear-gradient(45deg, #16a34a, #22c55e);
      color: white;
    }

    .action-button.raise {
      background: linear-gradient(45deg, #d97706, #f59e0b);
      color: white;
    }

    .action-button.check {
      background: linear-gradient(45deg, #6b7280, #9ca3af);
      color: white;
    }

    .action-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }

    .action-button:disabled {
      background: #666;
      color: #999;
      cursor: not-allowed;
      transform: none;
    }

    .game-info {
      position: fixed;
      top: 80px;
      left: 20px;
      background: rgba(0,0,0,0.8);
      padding: 15px;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(212, 175, 55, 0.3);
      font-size: 12px;
    }

    .game-info div {
      margin: 5px 0;
      color: #d4af37;
    }

    .betting-chips {
      position: absolute;
      display: flex;
      gap: 2px;
      justify-content: center;
      flex-wrap: wrap;
      max-width: 60px;
    }

    .chip {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 1px solid #333;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 6px;
      font-weight: bold;
    }

    .chip.white { background: #f8f9fa; color: #333; }
    .chip.red { background: #dc2626; color: white; }
    .chip.green { background: #16a34a; color: white; }
    .chip.black { background: #1f2937; color: white; }

    @media (max-width: 1024px) {
      .poker-table {
        width: 700px;
        height: 400px;
      }
      
      .game-controls, .game-info {
        position: relative;
        width: 100%;
        max-width: 300px;
        margin: 10px auto;
      }
      
      .action-panel {
        position: relative;
        margin: 20px auto;
        transform: none;
      }
    }

    @media (max-width: 768px) {
      .poker-table {
        width: 90vw;
        height: 300px;
      }
      
      .player-position {
        width: 100px;
      }
      
      .action-panel {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="casino-header">
    <h1>🎰 ROYAL FLUSH CASINO 🎰</h1>
  </div>

  <div class="game-controls">
    <div class="variant-selector">
      <label>Game Variant:</label>
      <select id="pokerVariant" onchange="changeVariant()">
        <option value="texas-holdem">Texas Hold'em</option>
        <option value="omaha">Omaha</option>
        <option value="seven-stud">Seven Card Stud</option>
        <option value="five-card-draw">Five Card Draw</option>
      </select>
    </div>
    <button class="control-button" onclick="dealNewHand()">🎰 New Hand</button>
    <button class="control-button" onclick="autoPlay()" id="autoPlayBtn">🤖 Auto Play</button>
  </div>

  <div class="game-info">
    <div id="currentRound">Round: Pre-flop</div>
    <div id="gameType">Game: Texas Hold'em</div>
    <div id="blindsInfo">Blinds: $5/$10</div>
  </div>

  <div class="poker-table-container">
    <div class="poker-table">
      <div class="table-felt"></div>
      
      <div class="pot-display" id="potDisplay">Pot: $0</div>
      
      <div class="community-area" id="communityArea">
        <div style="color: #d4af37; font-size: 12px; margin-right: 10px;">Board:</div>
      </div>
      
      <div class="dealer-button" id="dealerButton" style="display: none;">D</div>
      
      <!-- Player positions will be dynamically added here -->
    </div>
  </div>

  <div class="action-panel" id="actionPanel" style="display: none;">
    <button class="action-button fold" onclick="playerAction('fold')">Fold</button>
    <button class="action-button call" onclick="playerAction('call')" id="callBtn">Call</button>
    <button class="action-button raise" onclick="playerAction('raise')">Raise</button>
    <button class="action-button check" onclick="playerAction('check')" id="checkBtn">Check</button>
  </div>

  <script>
    const suits = ['♠', '♥', '♦', '♣'];
    const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
    
    let gameState = {
      variant: 'texas-holdem',
      deck: [],
      players: [],
      communityCards: [],
      currentPlayer: 0,
      dealerPosition: 0,
      round: 'pre-flop',
      pot: 0,
      currentBet: 0,
      smallBlind: 5,
      bigBlind: 10,
      isAutoPlay: false,
      roundsConfig: {
        'texas-holdem': ['pre-flop', 'flop', 'turn', 'river'],
        'omaha': ['pre-flop', 'flop', 'turn', 'river'],
        'seven-stud': ['3rd street', '4th street', '5th street', '6th street', '7th street'],
        'five-card-draw': ['initial', 'draw', 'final']
      }
    };

    const pokerVariants = {
      'texas-holdem': {
        name: 'Texas Hold\'em',
        holeCards: 2,
        communityCards: 5,
        players: 6,
        maxShowCommunity: { 'pre-flop': 0, 'flop': 3, 'turn': 4, 'river': 5 }
      },
      'omaha': {
        name: 'Omaha',
        holeCards: 4,
        communityCards: 5,
        players: 6,
        maxShowCommunity: { 'pre-flop': 0, 'flop': 3, 'turn': 4, 'river': 5 }
      },
      'seven-stud': {
        name: 'Seven Card Stud',
        holeCards: 7,
        communityCards: 0,
        players: 7,
        maxShowCommunity: {}
      },
      'five-card-draw': {
        name: 'Five Card Draw',
        holeCards: 5,
        communityCards: 0,
        players: 6,
        maxShowCommunity: {}
      }
    };

    function createDeck() {
      gameState.deck = [];
      for (let suit of suits) {
        for (let rank of ranks) {
          gameState.deck.push({ suit, rank });
        }
      }
      // Shuffle deck
      for (let i = gameState.deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [gameState.deck[i], gameState.deck[j]] = [gameState.deck[j], gameState.deck[i]];
      }
    }

    function createPlayers() {
      const variant = pokerVariants[gameState.variant];
      gameState.players = [];
      
      const playerNames = ['You', 'Alice', 'Bob', 'Charlie', 'Diana', 'Eve', 'Frank', 'Grace'];
      
      for (let i = 0; i < variant.players; i++) {
        gameState.players.push({
          name: playerNames[i] || `Player ${i + 1}`,
          cards: [],
          isHuman: i === 0,
          chips: 1000,
          currentBet: 0,
          isActive: true,
          isFolded: false,
          handStrength: '',
          position: i
        });
      }
    }

    function renderCard(card, faceDown = false) {
      const cardDiv = document.createElement('div');
      cardDiv.className = 'card';
      
      if (faceDown) {
        cardDiv.classList.add('face-down');
        return cardDiv;
      }

      const topRank = document.createElement('div');
      topRank.className = 'rank-suit';
      topRank.textContent = card.rank + card.suit;

      const bottomRank = document.createElement('div');
      bottomRank.className = 'rank-suit bottom';
      bottomRank.textContent = card.rank + card.suit;

      cardDiv.appendChild(topRank);
      cardDiv.appendChild(bottomRank);

      if (['♥', '♦'].includes(card.suit)) {
        cardDiv.classList.add('red');
      }

      return cardDiv;
    }

    function dealCards() {
      const variant = pokerVariants[gameState.variant];
      
      // Deal hole cards to each player
      for (let player of gameState.players) {
        player.cards = [];
        for (let i = 0; i < variant.holeCards; i++) {
          if (gameState.deck.length > 0) {
            player.cards.push(gameState.deck.pop());
          }
        }
      }

      // Deal community cards if applicable
      gameState.communityCards = [];
      if (variant.communityCards > 0) {
        for (let i = 0; i < variant.communityCards; i++) {
          if (gameState.deck.length > 0) {
            gameState.communityCards.push(gameState.deck.pop());
          }
        }
      }
    }

    function evaluateHand(cards, communityCards = []) {
      const allCards = [...cards, ...communityCards];
      if (allCards.length < 5 && gameState.variant === 'texas-holdem') {
        return 'Incomplete';
      }
      
      const suits = {};
      const ranks = {};
      
      allCards.forEach(card => {
        suits[card.suit] = (suits[card.suit] || 0) + 1;
        ranks[card.rank] = (ranks[card.rank] || 0) + 1;
      });

      const flushSuit = Object.keys(suits).find(suit => suits[suit] >= 5);
      const pairs = Object.keys(ranks).filter(rank => ranks[rank] >= 2);
      const trips = Object.keys(ranks).filter(rank => ranks[rank] >= 3);
      const quads = Object.keys(ranks).filter(rank => ranks[rank] >= 4);

      if (quads.length > 0) return 'Four of a Kind';
      if (trips.length > 0 && pairs.length > 1) return 'Full House';
      if (flushSuit) return 'Flush';
      if (trips.length > 0) return 'Three of a Kind';
      if (pairs.length >= 2) return 'Two Pair';
      if (pairs.length === 1) return 'One Pair';
      
      return 'High Card';
    }

    function createPlayerPositions() {
      const table = document.querySelector('.poker-table');
      const variant = pokerVariants[gameState.variant];
      
      // Clear existing positions
      const existingPositions = table.querySelectorAll('.player-position');
      existingPositions.forEach(pos => pos.remove());
      
      for (let i = 0; i < variant.players; i++) {
        const positionDiv = document.createElement('div');
        positionDiv.className = 'player-position';
        positionDiv.id = `player-${i}`;
        
        const seatDiv = document.createElement('div');
        seatDiv.className = 'player-seat';
        
        positionDiv.appendChild(seatDiv);
        table.appendChild(positionDiv);
      }
    }

    function renderGame() {
      renderPlayers();
      renderCommunityCards();
      updateGameInfo();
      updateActionPanel();
      updateDealerButton();
    }

    function renderPlayers() {
      const variant = pokerVariants[gameState.variant];
      
      gameState.players.forEach((player, index) => {
        const playerDiv = document.getElementById(`player-${index}`);
        const seatDiv = playerDiv.querySelector('.player-seat');
        
        seatDiv.className = 'player-seat';
        if (index === gameState.currentPlayer && !player.isFolded) {
          seatDiv.classList.add('active');
        }
        if (player.isFolded) {
          seatDiv.style.opacity = '0.5';
        } else {
          seatDiv.style.opacity = '1';
        }

        seatDiv.innerHTML = `
          <div class="player-name">${player.name}</div>
          <div class="player-chips">$${player.chips}</div>
          <div class="player-cards" id="cards-${index}"></div>
          <div class="player-bet">${player.currentBet > 0 ? '$' + player.currentBet : ''}</div>
          <div class="hand-strength">${(player.isHuman || gameState.isAutoPlay) ? evaluateHand(player.cards, gameState.communityCards) : ''}</div>
        `;

        const cardsDiv = document.getElementById(`cards-${index}`);
        player.cards.forEach(card => {
          const shouldShowCard = player.isHuman || gameState.isAutoPlay;
          const cardDiv = renderCard(card, !shouldShowCard);
          cardsDiv.appendChild(cardDiv);
        });
      });
    }

    function renderCommunityCards() {
      const container = document.getElementById('communityArea');
      const variant = pokerVariants[gameState.variant];
      
      // Clear existing cards except label
      const label = container.querySelector('div');
      container.innerHTML = '';
      container.appendChild(label);
      
      if (variant.communityCards === 0) {
        container.style.display = 'none';
        return;
      }
      
      container.style.display = 'flex';
      
      const cardsToShow = variant.maxShowCommunity[gameState.round] || 0;
      
      for (let i = 0; i < Math.min(cardsToShow, gameState.communityCards.length); i++) {
        const cardDiv = renderCard(gameState.communityCards[i]);
        container.appendChild(cardDiv);
      }
    }

    function updateGameInfo() {
      document.getElementById('currentRound').textContent = `Round: ${gameState.round}`;
      document.getElementById('gameType').textContent = `Game: ${pokerVariants[gameState.variant].name}`;
      document.getElementById('blindsInfo').textContent = `Blinds: $${gameState.smallBlind}/$${gameState.bigBlind}`;
      document.getElementById('potDisplay').textContent = `Pot: $${gameState.pot}`;
    }

    function updateActionPanel() {
      const panel = document.getElementById('actionPanel');
      const currentPlayer = gameState.players[gameState.currentPlayer];
      
      if (currentPlayer && currentPlayer.isHuman && !currentPlayer.isFolded) {
        panel.style.display = 'flex';
        
        const callBtn = document.getElementById('callBtn');
        const checkBtn = document.getElementById('checkBtn');
        
        if (gameState.currentBet > currentPlayer.currentBet) {
          const callAmount = gameState.currentBet - currentPlayer.currentBet;
          callBtn.textContent = `Call $${callAmount}`;
          callBtn.style.display = 'block';
          checkBtn.style.display = 'none';
        } else {
          callBtn.style.display = 'none';
          checkBtn.style.display = 'block';
        }
      } else {
        panel.style.display = 'none';
      }
    }

    function updateDealerButton() {
      const button = document.getElementById('dealerButton');
      const dealerPosition = document.getElementById(`player-${gameState.dealerPosition}`);
      
      if (dealerPosition) {
        button.style.display = 'block';
        const rect = dealerPosition.getBoundingClientRect();
        const tableRect = document.querySelector('.poker-table').getBoundingClientRect();
        
        button.style.left = `${rect.left - tableRect.left + 10}px`;
        button.style.top = `${rect.top - tableRect.top + 10}px`;
      }
    }

    function postBlinds() {
      const variant = pokerVariants[gameState.variant];
      if (variant.players < 2) return;
      
      const smallBlindPos = (gameState.dealerPosition + 1) % variant.players;
      const bigBlindPos = (gameState.dealerPosition + 2) % variant.players;
      
      gameState.players[smallBlindPos].currentBet = gameState.smallBlind;
      gameState.players[smallBlindPos].chips -= gameState.smallBlind;
      gameState.players[bigBlindPos].currentBet = gameState.bigBlind;
      gameState.players[bigBlindPos].chips -= gameState.bigBlind;
      
      gameState.pot = gameState.smallBlind + gameState.bigBlind;
      gameState.currentBet = gameState.bigBlind;
      
      // Set current player to left of big blind
      gameState.currentPlayer = (gameState.dealerPosition + 3) % variant.players;
    }

    function changeVariant() {
      gameState.variant = document.getElementById('pokerVariant').value;
      dealNewHand();
    }

    function dealNewHand() {
      createDeck();
      createPlayers();
      createPlayerPositions();
      dealCards();
      
      gameState.round = gameState.roundsConfig[gameState.variant][0];
      gameState.pot = 0;
      gameState.currentBet = 0;
      
      // Reset all players
      gameState.players.forEach(player => {
        player.currentBet = 0;
        player.isFolded = false;
        player.isActive = true;
      });
      
      // Post blinds for Hold'em variants
      if (['texas-holdem', 'omaha'].includes(gameState.variant)) {
        postBlinds();
      } else {
        gameState.currentPlayer = gameState.dealerPosition;
      }
      
      renderGame();
    }

    function playerAction(action) {
      const player = gameState.players[gameState.currentPlayer];
      
      switch (action) {
        case 'fold':
          player.isFolded = true;
          player.isActive = false;
          break;
          
        case 'call':
          const callAmount = gameState.currentBet - player.currentBet;
          if (callAmount > 0) {
            const actualCall = Math.min(callAmount, player.chips);
            player.currentBet += actualCall;
            player.chips -= actualCall;
            gameState.pot += actualCall;
          }
          break;
          
        case 'raise':
          const raiseAmount = gameState.bigBlind * 2; // Minimum raise
          const totalBet = gameState.currentBet + raiseAmount;
          const additionalAmount = totalBet - player.currentBet;
          
          if (player.chips >= additionalAmount) {
            player.chips -= additionalAmount;
            gameState.pot += additionalAmount;
            player.currentBet = totalBet;
            gameState.currentBet = totalBet;
          }
          break;
          
        case 'check':
          // No money changes hands
          break;
      }

      // Move to next active player
      let nextPlayer = gameState.currentPlayer;
      let attempts = 0;
      do {
        nextPlayer = (nextPlayer + 1) % gameState.players.length;
        attempts++;
      } while ((!gameState.players[nextPlayer].isActive || gameState.players[nextPlayer].isFolded) && attempts < gameState.players.length);
      
      gameState.currentPlayer = nextPlayer;
      
      // Check if betting round is complete
      if (isBettingRoundComplete()) {
        advanceToNextRound();
      } else {
        renderGame();
        
        // Auto-play for computer players
        if (!gameState.players[gameState.currentPlayer].isHuman && !gameState.players[gameState.currentPlayer].isFolded) {
          setTimeout(() => {
            computerPlayerAction();
          }, 1500);
        }
      }
    }

    function computerPlayerAction() {
      const player = gameState.players[gameState.currentPlayer];
      if (player.isFolded || !player.isActive) return;
      
      // Simple AI logic
      const handStrength = evaluateHand(player.cards, gameState.communityCards);
      const random = Math.random();
      
      let action;
      if (gameState.currentBet > player.currentBet) {
        // Need to call or fold
        if (handStrength.includes('Pair') || handStrength.includes('Two') || handStrength.includes('Three') || random > 0.7) {
          action = 'call';
        } else {
          action = 'fold';
        }
      } else {
        // Can check or raise
        if ((handStrength.includes('Pair') && random > 0.5) || handStrength.includes('Two') || handStrength.includes('Three')) {
          action = 'raise';
        } else {
          action = 'check';
        }
      }
      
      playerAction(action);
    }

    function isBettingRoundComplete() {
      const activePlayers = gameState.players.filter(p => p.isActive && !p.isFolded);
      if (activePlayers.length <= 1) return true;
      
      // Check if all active players have equal bets
      const currentBets = activePlayers.map(p => p.currentBet);
      return currentBets.every(bet => bet === gameState.currentBet);
    }

    function advanceToNextRound() {
      const rounds = gameState.roundsConfig[gameState.variant];
      const currentRoundIndex = rounds.indexOf(gameState.round);
      
      if (currentRoundIndex < rounds.length - 1) {
        gameState.round = rounds[currentRoundIndex + 1];
        
        // Reset betting for new round
        gameState.players.forEach(player => {
          player.currentBet = 0;
        });
        gameState.currentBet = 0;
        
        // Set current player to first active player after dealer
        let firstPlayer = gameState.dealerPosition;
        do {
          firstPlayer = (firstPlayer + 1) % gameState.players.length;
        } while ((!gameState.players[firstPlayer].isActive || gameState.players[firstPlayer].isFolded) && firstPlayer !== gameState.dealerPosition);
        
        gameState.currentPlayer = firstPlayer;
        
        renderGame();
        
        // Continue with computer players if needed
        if (!gameState.players[gameState.currentPlayer].isHuman) {
          setTimeout(() => {
            computerPlayerAction();
          }, 1500);
        }
      } else {
        // Hand is complete - determine winner
        showdown();
      }
    }

    function showdown() {
      const activePlayers = gameState.players.filter(p => !p.isFolded);
      
      if (activePlayers.length === 1) {
        // Only one player left - they win
        const winner = activePlayers[0];
        winner.chips += gameState.pot;
        highlightWinner(winner);
      } else {
        // Multiple players - evaluate hands
        let bestHand = '';
        let winners = [];
        
        activePlayers.forEach(player => {
          const handStrength = evaluateHand(player.cards, gameState.communityCards);
          player.handStrength = handStrength;
          
          if (!bestHand || isHandBetter(handStrength, bestHand)) {
            bestHand = handStrength;
            winners = [player];
          } else if (handStrength === bestHand) {
            winners.push(player);
          }
        });
        
        // Split pot among winners
        const winAmount = Math.floor(gameState.pot / winners.length);
        winners.forEach(winner => {
          winner.chips += winAmount;
          highlightWinner(winner);
        });
      }
      
      // Prepare for next hand
      setTimeout(() => {
        gameState.dealerPosition = (gameState.dealerPosition + 1) % gameState.players.length;
        dealNewHand();
      }, 5000);
    }

    function isHandBetter(hand1, hand2) {
      const handRankings = [
        'High Card', 'One Pair', 'Two Pair', 'Three of a Kind', 
        'Straight', 'Flush', 'Full House', 'Four of a Kind', 
        'Straight Flush', 'Royal Flush'
      ];
      
      const rank1 = handRankings.indexOf(hand1);
      const rank2 = handRankings.indexOf(hand2);
      
      return rank1 > rank2;
    }

    function highlightWinner(winner) {
      const playerDiv = document.getElementById(`player-${winner.position}`);
      const seatDiv = playerDiv.querySelector('.player-seat');
      seatDiv.classList.add('winner');
      
      setTimeout(() => {
        seatDiv.classList.remove('winner');
      }, 4000);
    }

    function autoPlay() {
      gameState.isAutoPlay = !gameState.isAutoPlay;
      const btn = document.getElementById('autoPlayBtn');
      btn.textContent = gameState.isAutoPlay ? '⏸️ Stop Auto' : '🤖 Auto Play';
      renderGame();
      
      if (gameState.isAutoPlay && gameState.players[gameState.currentPlayer].isHuman) {
        // Auto-play current human turn
        setTimeout(() => {
          const actions = ['fold', 'call', 'check'];
          const randomAction = actions[Math.floor(Math.random() * actions.length)];
          playerAction(randomAction);
        }, 1000);
      }
    }

    // Initialize game
    document.addEventListener('DOMContentLoaded', function() {
      changeVariant();
    });
  </script>
</body>
</html>